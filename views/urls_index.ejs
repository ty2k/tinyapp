<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TinyApp: URLs Index</title>
  </head>
  <body>
    <% include partials/_header.ejs %>
    <!--If not logged in, display nothing but header -->
    <% if (user === undefined) { %>
      <p>If you were to <a href="/register">register</a> or <a href="/login">login</a>, this page would be a <strong>lot</strong> more interesting.
      <% } else { %> <!-- If logged in, display the index,-->
    <h2>Shortened URLs Index</h2>
    <ul>
      <% for (var key in urls) { %>
        <% if (urls.hasOwnProperty(key)) { %>
          <% if (urls[key].userID === user.id) { %>
            <li>
              <a href="/u/<%= key %>">/u/<%= key %></a>: <a href="<%= urls[key].url %>"><%= urls[key].url %></a>
              <a href="/urls/<%= key %>">Edit</a>
              <form method="POST" action="/urls/<%= key %>/delete"><button>Delete</button></form>
            </li>
          <% } %>
          <% } %>
          <% } %>
            <li>
              <a href="/urls/new">Shorten a new URL</a>
            </li>
    </ul>
    <% } %>
  </body>
</html>